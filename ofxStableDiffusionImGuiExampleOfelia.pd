#N canvas 953 643 533 303 10;
#X obj 16 15 cnv 15 500 270 empty empty empty 20 12 0 14 #f8fc00 #404040 0;
#X obj 41 25 cnv 15 450 250 empty empty ofxStableDiffusion 40 50 0 30 #00f8fc #f8fc00 0;
#X obj 81 166 ofelia d -k \$0-ofxStableDiffusion;
#A __set if type(window) ~= "userdata" then \; window = ofWindow() \; end \; \; local a = ofelia \; local clock = ofClock(this \, "setup") \; local stableDiffusion \; local texture = ofTexture() \; local gui = ofxImGuiGui() \; local test = ImGuiNew_BoolArray(1) \; local test1 = ImGuiNew_IntArray(1) \; local test2 = "a red cat \, van gogh" \; local generate = false \; \; function a.new() \; ofWindow.addListener("setup" \, this) \; ofWindow.addListener("update" \, this) \; ofWindow.addListener("draw" \, this) \; ofWindow.addListener("exit" \, this) \; window:setPosition(30 \, 100) \; window:setSize(612 \, 612) \; if ofWindow.exists then \; clock:delay(0) \; else \; window:create() \; end \; end \; \; function a.free() \; window:destroy() \; ofWindow.removeListener("setup" \, this) \; ofWindow.removeListener("update" \, this) \; ofWindow.removeListener("draw" \, this) \; ofWindow.removeListener("exit" \, this) \; end \; \; function a.setup() \; ImGuiBoolArray_setitem(test \, 0 \, false) \; ImGuiIntArray_setitem(test1 \, 0 \, 5) \; gui:setup() \; texture:allocate(512 \, 512 \, GL_RGB) \; ofSetWindowTitle("ofxStableDiffusion") \; ofBackground(150 \, 230 \, 255 \, 255) \; print(ofxSd_get_system_info()) \; stableDiffusion = ofxNew_sd_ctx("sd_turbo.safetensors" \, "" \, "" \, "" \, "" \, "" \, "" \, true \, false \, false \, 8 \, 1 \, 0 \, 0 \, false \, false \, false) \; end \; \; function a.update() \; if generate == true then \; local result = ofxTxt2img(stableDiffusion \, test2 \, "" \, 0 \, 1 \, 512 \, 512 \, 0 \, 5 \, -1 \, 1 \, sd_image_t \, 1 \, 1 \, false \, "") \; texture:loadData(result.data \, 512 \, 512 \, GL_RGB) \; end \; end \; \; function a.draw() \; texture:draw(50 \, 50) \; gui:begin() \; ImGuiBegin("ofxImGui example-simple" \, p_open) \; ImGuiText("The checkbox above is checked.") \; ImGuiSliderInt("Batch Size" \, test1 \, 1 \, 16) \; ImGuiCheckbox("Checkbox" \, test) \; ImGuiRadioButton("String goes here" \, true) \; generate = ImGuiButton("Generate") \; ImGuiInputText( "Prompt" \, test2 \, 40) \; ImGuiEnd() \; gui:c_end() \; end \; \; function a.exit() \; end \;;
